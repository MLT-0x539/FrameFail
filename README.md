# FrameFail

Generally, it is not possible for a browser to read or view the cotnents of an iframe from outside of that frame.. for example if there was an iframe that had an embedded website, and you had some JavaScript code designed to read a string of text embdedded within that iframe, it would not allow you to do so. All modern browsers prevent this for security reasons.

I developed a payload that abuses HTML5's "Canvas" API to generate a "snapshot" of the page's DOM, and in doing so it renders the entire page including the content within the iframe (rather than only displaying top level content). This script will generate a page snapshot that includes the contents of the iframe, and then it will automatically upload it to imgur for an attacker to view.

This has many uses as a potential attack vector, both locally and remotely. One example could be like those SSRF's in PDF parsers that were somewhat common a few years ago, where you could abuse HTMLi or XSS to inject an iframe pointing to a file:/// URI or some other SSRF payload, so that when the PDF parser generates the PDF, it outputs the contents of the iframe allowing for LFD -- well, imagine a similar scenario except where the SSRF is Blind/OOB -- we can confirm it exists by making a request to our WebDAV instance via a file:// URI, however we cannot abuse it for the likes of LFD due to it being blind, preventing us from being able to read the frame contents (and we cant pull the frame conetent via javascript since it's not possible to read the contents of an iframe from outside of that frame) -- we could use this payload so that despite the SSRF being Blind/OOB, a page snapshot (including the frame conetnts) still gets generated and then uploaded to imgur, so the attacker can then view the uploaded image and manually read the text from within the iframe to know what its contents are.

Another example could be if you sent this as a malicious emaiil attachment, with the value of the iframe set to `file://C:\boot.ini` (for windows) or `file:///etc/passwd` (for linux) -- the victim sees the email and opens the attachment, causing the HTML document to be downloaded and displayed locally within their browser. This results in the contents of whatever file we're trying to read getting embedded within the iframe, and then again, via abuse of HTML5's Canvas API, a snapshot of the page's DOM is generated and uploaded to imgur for the atttacker to read. If we didn't know the path to a specific file that we wanted to read, then we could include hundreds (or thousands) of iframes in the page all at onec with different file paths in order to "bruteforce" the path to the file.

**NOTE: I am generally not in the habit of dropping my more juicy 0days when they are still exploitable, but some worthless skidiot already leaked this method from within my private discord server. Aforementioned skidstain has been wiped off of my ass and expunged down the toilet, so hopefully no more leaks. I have tweaked this payload slightly, but as long as you're not a complete and utter moron you should be able to figure out which tweaks are required in order to make this work. It is worth noting that ALL modern browsers are affected by this method.. or all popular ones at least. I have tested this on Firefox, Chrome, Brave, IE9, and Microsoft Edge and iframe contents can be read via all of these browsers using this method -- as far as I can tell, as long as the browser has support for HTML5 w/ Canvas API (read: as long as it's not older than your mother) then this should work**
